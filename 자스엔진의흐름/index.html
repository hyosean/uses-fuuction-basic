<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function test() {
            setTimeout(function () {
                console.log("3초 뒤에 실행");
            }, 0);

            for (let i = 0; i < 100; i++) {
                console.log(i);
            }
            console.log("for문완료");
        }

        test();
        console.log("전체 완료");

        /*
        1. queue 에 test() -> setTimeout콜백함수 -> for문 -> console(for문완료) -> console(전체완료) 순으로 등록
        2. event loop가 queue를 검사해서 위의 순서대로 callstack에 순차적으로 등록
        3. 이때 setTimeout은 자체스크립트 엔진이아닌 브라우저 기술이므로 web api에게 작업을 넘겨주고 다음으로 넘어감
        4. 자기업무가 아니니 무시하고 바로다음 for문을 callstack에 등록
        5. console(전체완료) 이후  callstack에 등록
        6. web api 가 setTimeout을 완료한 다음에 다시queue에 등록
        7. 다시 event loop가 해당 완료된 setTimeout의 콜백함수를 다시 callstack에등록해서 실행완료
        */
    </script>
</body>

</html>